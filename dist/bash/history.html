<!DOCTYPE html><html lang="zh-CN" prefix="og: http://ogp.me/ns#"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>操作历史 - Bash 脚本教程 - 网道</title><!-- link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" --><link rel="stylesheet" href="assets/css/app.min.css"><link rel="stylesheet" href="https://apps.bdimg.com/libs/fontawesome/4.4.0/css/font-awesome.css"><!-- link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.css"--><!-- link rel="stylesheet" href="assets/css/share.min.css" --><meta property="og:type" content="article"><meta property="og:title" content="操作历史"><link rel="apple-touch-icon" href="assets/icons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="192x192" href="assets/icons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="assets/icons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="assets/icons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="assets/icons/favicon-16x16.png"><link rel="manifest" href="assets/icons/manifest.json"></head><body><nav class="navbar is-light" role="navigation" id="navbar" aria-label="main navigation"><div class="container"><div class="navbar-brand"><a href="/" class="navbar-item title has-text-grey has-text-weight-light is-5">网道 / WangDoc.com </a><a role="button" class="navbar-burger" data-target="navMenu" aria-label="menu" aria-expanded="false"><span aria-hidden="true"></span> <span aria-hidden="true"></span> <span aria-hidden="true"></span></a></div><div class="navbar-menu" id="navMenu"><div class="navbar-end"><div class="navbar-item"><form action="https://sourcegraph.com/search" target="_blank" method="get" onsubmit='this.q.value="repo:^github.com/wangdoc/bash-tutorial$ "+this.origin.value'><p class="control has-icons-right"><input class="input" type="text" name="origin" placeholder="搜索..."> <span class="icon is-small is-right"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><path fill="#ddd" d="M23.822 20.88l-6.353-6.354c.93-1.465 1.467-3.2 1.467-5.059.001-5.219-4.247-9.467-9.468-9.467s-9.468 4.248-9.468 9.468c0 5.221 4.247 9.469 9.468 9.469 1.768 0 3.421-.487 4.839-1.333l6.396 6.396 3.119-3.12zm-20.294-11.412c0-3.273 2.665-5.938 5.939-5.938 3.275 0 5.94 2.664 5.94 5.938 0 3.275-2.665 5.939-5.94 5.939-3.274 0-5.939-2.664-5.939-5.939z"/></svg></span></p><input type="hidden" name="q" value=""> <input type="hidden" name="patternType" value="literal"></form></div><a class="navbar-item is-hidden-desktop-only" target="_blank" href="https://github.com/wangdoc/bash-tutorial"><span class="icon" style="color: #333;"><i class="fa fa-lg fa-github"></i></span></a></div></div></div></nav><section class="section main article"><div class="container"><div class="columns"><div class="column is-8 is-6-widescreen is-offset-1-widescreen"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="index.html"><span class="icon"><i class="fa fa-home"></i></span> &nbsp;Bash 脚本教程</a></li><li class="is-active"><a class="has-text-grey" href="history.html">操作历史</a></li></ul></nav><nav class="level level-previous-next is-mobile"><!-- Left side --><div class="level-left"><p class="level-item is-narrow"><a href="arithmetic.html"><span class="icon"><i class="fa fa-toggle-left"></i></span> 算术运算</a></p></div><div class="level-right"><p class="level-item is-narrow"><a href="readline.html">行操作 <span class="icon"><i class="fa fa-toggle-right"></i></span></a></p></div></nav><article class="content"><h1 class="title">操作历史</h1><div class="page-meta"><p>网道（WangDoc.com），互联网文档计划</p></div><h2 id="简介">简介 <a class="markdownIt-Anchor" href="#简介">#</a></h2><p>Bash 会保留用户的操作历史，即用户输入的每一条命令都会记录，默认是保存最近的500条命令。有了操作历史以后，就可以使用方向键的<code>↑</code>和<code>↓</code>，快速浏览上一条和下一条命令。</p><p>退出当前 Shell 的时候，Bash 会将用户在当前 Shell 的操作历史写入<code>~/.bash_history</code>文件，该文件默认储存500个操作。</p><p>环境变量<code>HISTFILE</code>总是指向这个文件。</p><pre class="hljs"><code>$ <span class="hljs-built_in">echo</span> <span class="hljs-variable">$HISTFILE</span>
/home/me/.bash_history
</code></pre><h2 id="history-命令">history 命令 <a class="markdownIt-Anchor" href="#history-命令">#</a></h2><p><code>history</code>命令会输出<code>.bash_history</code>文件的全部内容，即输出操作历史。</p><pre class="hljs"><code>$ <span class="hljs-built_in">history</span>
...
498 <span class="hljs-built_in">echo</span> Goodbye
499 <span class="hljs-built_in">ls</span> ~
500 <span class="hljs-built_in">cd</span>
</code></pre><p>用户可以使用这个命令，查看最近的操作。相比直接读取<code>.bash_history</code>文件，它的优势在于所有命令之前加上了行号。最近的操作在最后面，行号最大。</p><p>如果想搜索某个以前执行的命令，可以配合<code>grep</code>命令搜索操作历史。</p><pre class="hljs"><code>$ <span class="hljs-built_in">history</span> | grep /usr/bin
</code></pre><p>上面命令返回<code>.bash_history</code>文件里面，那些包含<code>/usr/bin</code>的命令。</p><p><code>history</code>命令的<code>-c</code>参数可以清除操作历史，即清空<code>.bash_history</code>文件。</p><pre class="hljs"><code>$ <span class="hljs-built_in">history</span> -c
</code></pre><h2 id="环境变量">环境变量 <a class="markdownIt-Anchor" href="#环境变量">#</a></h2><h3 id="histtimeformat">HISTTIMEFORMAT <a class="markdownIt-Anchor" href="#histtimeformat">#</a></h3><p>通过定制环境变量<code>HISTTIMEFORMAT</code>，<code>history</code>的输出结果还可以显示每个操作的时间。</p><pre class="hljs"><code>$ <span class="hljs-built_in">export</span> HISTTIMEFORMAT=<span class="hljs-string">&#x27;%F %T  &#x27;</span>
$ <span class="hljs-built_in">history</span>
1  2013-06-09 10:40:12   <span class="hljs-built_in">cat</span> /etc/issue
2  2013-06-09 10:40:12   clear
</code></pre><p>上面代码中，<code>%F</code>相当于<code>%Y - %m - %d</code>（年-月-日），<code>%T</code>相当于<code>%H : %M : %S</code>（时:分:秒）。</p><p>只要设置<code>HISTTIMEFORMAT</code>这个环境变量，就会在<code>.bash_history</code>文件保存命令的执行时间戳。如果不设置，就不会保存时间戳。</p><h3 id="histsize">HISTSIZE <a class="markdownIt-Anchor" href="#histsize">#</a></h3><p>环境变量<code>HISTSIZE</code>设置保存历史操作的数量。</p><pre class="hljs"><code>$ <span class="hljs-built_in">export</span> HISTSIZE=10000
</code></pre><p>上面命令设置保存过去10000条操作历史。</p><p>如果不希望保存本次操作的历史，可以设置<code>HISTSIZE</code>等于0。</p><pre class="hljs"><code><span class="hljs-built_in">export</span> HISTSIZE=0
</code></pre><p>如果<code>HISTSIZE=0</code>写入用户主目录的<code>~/.bashrc</code>文件，那么就不会保留该用户的操作历史。如果写入<code>/etc/profile</code>，整个系统都不会保留操作历史。</p><h3 id="histignore">HISTIGNORE <a class="markdownIt-Anchor" href="#histignore">#</a></h3><p>环境变量<code>HISTIGNORE</code>可以设置哪些命令不写入操作历史。</p><pre class="hljs"><code><span class="hljs-built_in">export</span> HISTIGNORE=<span class="hljs-string">&#x27;pwd:ls:exit&#x27;</span>
</code></pre><p>上面示例设置，<code>pwd</code>、<code>ls</code>、<code>exit</code>这三个命令不写入操作历史。</p><h2 id="ctrl--r">Ctrl + r <a class="markdownIt-Anchor" href="#ctrl--r">#</a></h2><p>输入命令时，按下<code>Ctrl + r</code>快捷键，就可以搜索操作历史，选择以前执行过的命令。</p><p><code>Ctrl + r</code>相当于打开一个<code>.bash_history</code>文件的搜索接口，直接键入命令的开头部分，Shell 就会自动在该文件中反向查询（即先查询最近的命令），显示最近一条匹配的结果，这时按下回车键，就会执行那条命令。</p><h2 id="-命令">! 命令 <a class="markdownIt-Anchor" href="#-命令">#</a></h2><h3 id="--行号">! + 行号 <a class="markdownIt-Anchor" href="#--行号">#</a></h3><p>操作历史的每一条记录都有行号。知道了命令的行号以后，可以用<code>感叹号 + 行号</code>执行该命令。如果想要执行<code>.bash_history</code>里面的第8条命令，可以像下面这样操作。</p><pre class="hljs"><code>$ !8
</code></pre><h3 id="--数字">!- 数字 <a class="markdownIt-Anchor" href="#--数字">#</a></h3><p>如果想执行本次 Shell 对话中倒数的命令，比如执行倒数第3条命令，就可以输入<code>!-3</code>。</p><pre class="hljs"><code>$ <span class="hljs-built_in">touch</span> a.txt
$ <span class="hljs-built_in">touch</span> b.txt
$ <span class="hljs-built_in">touch</span> c.txt

$ !-3
<span class="hljs-built_in">touch</span> a.txt
</code></pre><p>上面示例中，<code>!-3</code>返回倒数第3条命令，即<code>touch a.txt</code>。</p><p>它跟<code>! + 行号</code>的主要区别是，后者是在<code>.bash_history</code>文件中从头开始计算行数，而<code>!- 数字</code>是从底部开始向上计算行数。</p><h3 id="">!! <a class="markdownIt-Anchor" href="#">#</a></h3><p><code>!!</code>命令返回上一条命令。如果需要重复执行某一条命令，就可以不断键入<code>!!</code>，这样非常方便。它等同于<code>!-1</code>。</p><pre class="hljs"><code>$ <span class="hljs-built_in">echo</span> hello
hello

$ !!
<span class="hljs-built_in">echo</span> hello
hello
</code></pre><p>上面示例中，<code>!!</code>会返回并执行上一条命令<code>echo hello</code>。</p><p>有时候，我们使用某条命令，系统报错没有权限，这时就可以使用<code>sudo !!</code>。</p><pre class="hljs"><code><span class="hljs-comment"># 报错，没有执行权限</span>
$ yum update

$ <span class="hljs-built_in">sudo</span> !!
<span class="hljs-built_in">sudo</span> yum update
</code></pre><p>上面示例中，<code>sudo !!</code>返回<code>sudo yum update</code>，从而就可以正确执行了。</p><h3 id="--搜索词">! + 搜索词 <a class="markdownIt-Anchor" href="#--搜索词">#</a></h3><p><code>感叹号 + 搜索词</code>可以快速执行匹配的命令。</p><pre class="hljs"><code>$ <span class="hljs-built_in">echo</span> Hello World
Hello World

$ <span class="hljs-built_in">echo</span> Goodbye
Goodbye

$ !e
<span class="hljs-built_in">echo</span> Goodbye
Goodbye
</code></pre><p>上面例子中，<code>!e</code>表示找出操作历史之中，最近的那一条以<code>e</code>开头的命令并执行。Bash 会先输出那一条命令<code>echo Goodbye</code>，然后直接执行。</p><p>同理，<code>!echo</code>也会执行最近一条以<code>echo</code>开头的命令。</p><pre class="hljs"><code>$ !<span class="hljs-built_in">echo</span>
<span class="hljs-built_in">echo</span> Goodbye
Goodbye

$ !<span class="hljs-built_in">echo</span> H
<span class="hljs-built_in">echo</span> Goodbye H
Goodbye H

$ !<span class="hljs-built_in">echo</span> H G
<span class="hljs-built_in">echo</span> Goodbye H G
Goodbye H G
</code></pre><p>注意，<code>感叹号 + 搜索词</code>语法只会匹配命令，不会匹配参数。所以<code>!echo H</code>不会执行<code>echo Hello World</code>，而是会执行<code>echo Goodbye</code>，并把参数<code>H</code>附加在这条命令之后。同理，<code>!echo H G</code>也是等同于<code>echo Goodbye</code>命令之后附加<code>H G</code>。</p><p>由于<code>感叹号 + 搜索词</code>会扩展成以前执行过的命令，所以含有<code>!</code>的字符串放在双引号里面，必须非常小心，如果它后面有非空格的字符，就很有可能报错。</p><pre class="hljs"><code>$ <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;I say:\&quot;hello!\&quot;&quot;</span>
bash: !\: event not found
</code></pre><p>上面的命令会报错，原因是感叹号后面是一个反斜杠，Bash 会尝试寻找，以前是否执行过反斜杠开头的命令，一旦找不到就会报错。解决方法就是在感叹号前面，也加上反斜杠。</p><pre class="hljs"><code>$ <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;I say:\&quot;hello\!\&quot;&quot;</span>
I say:<span class="hljs-string">&quot;hello\!&quot;</span>
</code></pre><h3 id="--搜索词-1">!? + 搜索词 <a class="markdownIt-Anchor" href="#--搜索词-1">#</a></h3><p><code>!? + 搜索词</code>可以搜索命令的任意部分，包括参数部分。它跟<code>! + 搜索词</code>的主要区别是，后者是从行首开始匹配。</p><pre class="hljs"><code>$ <span class="hljs-built_in">cat</span> hello.txt
Hello world ..!

$ !?hello.txt
<span class="hljs-built_in">cat</span> hello.txt
Hello world ..!
</code></pre><p>上面示例中，<code>!?hello.txt</code>会返回最近一条包括<code>hello.txt</code>的命令。</p><h3 id="-1">!$，!* <a class="markdownIt-Anchor" href="#-1">#</a></h3><p><code>!$</code>代表上一个命令的最后一个参数，它的另一种写法是<code>$_</code>。</p><p><code>!*</code>代表上一个命令的所有参数，即除了命令以外的所有部分。</p><pre class="hljs"><code>$ <span class="hljs-built_in">cp</span> a.txt b.txt
$ <span class="hljs-built_in">echo</span> !$
b.txt

$ <span class="hljs-built_in">cp</span> a.txt b.txt
$ <span class="hljs-built_in">echo</span> !*
a.txt b.txt
</code></pre><p>上面示例中，<code>!$</code>代表上一个命令的最后一个参数（<code>b.txt</code>），<code>!*</code>代表上一个命令的所有参数（<code>a.txt b.txt</code>）。</p><p>如果想匹配上一个命令的某个指定位置的参数，使用<code>!:n</code>。</p><pre class="hljs"><code>$ <span class="hljs-built_in">ls</span> a.txt b.txt c.txt

$ <span class="hljs-built_in">echo</span> !:2
b.txt
</code></pre><p>上面示例中，<code>!:2</code>返回上一条命令的第二个参数（<code>b.txt</code>）。</p><p>这种写法的<code>!:$</code>，代表上一个命令的最后一个参数。事实上，<code>!$</code>就是<code>!:$</code>的简写形式。</p><pre class="hljs"><code>$ <span class="hljs-built_in">ls</span> a.txt b.txt c.txt

$ <span class="hljs-built_in">echo</span> !:$
<span class="hljs-built_in">echo</span> c.txt
c.txt
</code></pre><p>上面示例中，<code>!:$</code>代表上一条命令的最后一个参数（<code>c.txt</code>）。</p><p>如果想匹配更久以前的命令的参数，可以使用<code>!&lt;命令&gt;:n</code>（指定位置的参数）和<code>!&lt;命令&gt;:$</code>（最后一个参数）。</p><pre class="hljs"><code>$ <span class="hljs-built_in">ls</span> !<span class="hljs-built_in">mkdir</span>:$
</code></pre><p>上面示例中，<code>!mkdir:$</code>会返回前面最后一条<code>mkdir</code>命令的最后一个参数。</p><pre class="hljs"><code>$ <span class="hljs-built_in">ls</span> !mk:2
</code></pre><p>上面示例中，<code>!mk:2</code>会返回前面最后一条以<code>mk</code>开头的命令的第二个参数。</p><h3 id="p">!:p <a class="markdownIt-Anchor" href="#p">#</a></h3><p>如果只是想输出上一条命令，而不是执行它，可以使用<code>!:p</code>。</p><pre class="hljs"><code>$ <span class="hljs-built_in">echo</span> hello

$ !:p
<span class="hljs-built_in">echo</span> hello
</code></pre><p>上面示例中，<code>!:p</code>只会输出<code>echo hello</code>，而不会执行这条命令。</p><p>如果想输出最近一条匹配的命令，而不执行它，可以使用<code>!&lt;命令&gt;:p</code>。</p><pre class="hljs"><code>$ !su:p
</code></pre><p>上面示例中，<code>!su:p</code>会输出前面最近一条以<code>su</code>开头的命令，而不执行它。</p><h2 id="string1string2"><code>^string1^string2</code> <a class="markdownIt-Anchor" href="#string1string2">#</a></h2><p><code>^string1^string2</code>用来执行最近一条包含<code>string1</code>的命令，将其替换成<code>string2</code>。</p><pre class="hljs"><code>$ <span class="hljs-built_in">rm</span> /var/log/httpd/error.log
$ ^error^access
<span class="hljs-built_in">rm</span> /var/log/httpd/access.log
</code></pre><p>上面示例中，<code>^error^access</code>将最近一条含有<code>error</code>的命令里面的<code>error</code>，替换成<code>access</code>。</p><h2 id="histverify-参数">histverify 参数 <a class="markdownIt-Anchor" href="#histverify-参数">#</a></h2><p>上面的那些快捷命令（比如<code>!!</code>命令），都是找到匹配的命令后，直接执行。如果希望增加一个确认步骤，先输出是什么命令，让用户确认后再执行，可以打开 Shell 的<code>histverify</code>选项。</p><pre class="hljs"><code>$ <span class="hljs-built_in">shopt</span> -s histverify
</code></pre><p>打开<code>histverify</code>这个选项后，使用<code>!</code>快捷键所返回的命令，就会先输出，等到用户按下回车键后再执行。</p><h2 id="快捷键">快捷键 <a class="markdownIt-Anchor" href="#快捷键">#</a></h2><p>下面是其他一些与操作历史相关的快捷键。</p><ul><li><code>Ctrl + p</code>：显示上一个命令，与向上箭头效果相同（previous）。</li><li><code>Ctrl + n</code>：显示下一个命令，与向下箭头效果相同（next）。</li><li><code>Alt + &lt;</code>：显示第一个命令。</li><li><code>Alt + &gt;</code>：显示最后一个命令，即当前的命令。</li><li><code>Ctrl + o</code>：执行历史文件里面的当前条目，并自动显示下一条命令。这对重复执行某个序列的命令很有帮助。</li></ul><h2 id="参考链接">参考链接 <a class="markdownIt-Anchor" href="#参考链接">#</a></h2><ul><li><a href="https://www.redhat.com/sysadmin/bash-bang-commands" target="_blank" rel="noopener">Bash bang commands: A must-know trick for the Linux command line</a></li></ul></article><nav class="level level-previous-next is-mobile"><!-- Left side --><div class="level-left"><p class="level-item is-narrow"><a href="arithmetic.html"><span class="icon"><i class="fa fa-toggle-left"></i></span> 算术运算</a></p></div><div class="level-right"><p class="level-item is-narrow"><a href="readline.html">行操作 <span class="icon"><i class="fa fa-toggle-right"></i></span></a></p></div></nav><div class="page-info"><p>本教程采用<a href="https://creativecommons.org/licenses/by-sa/3.0/deed.zh" target="_blank">知识共享 署名-相同方式共享 3.0协议</a>。</p><p>分享本文 <span class="social-share"></span></p></div></div><div class="column is-3 is-offset-1"><nav class="panel panel-menu is-light"><p class="panel-heading"><i class="fa fa-book" aria-hidden="true"></i> Bash 脚本教程</p><div class="panel-block"><aside class="menu"><p class="menu-label"></p><ul class="menu-list"><li><a href="intro.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">简介</span></a></li><li><a href="grammar.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">基本语法</span></a></li><li><a href="expansion.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">模式扩展</span></a></li><li><a href="quotation.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">引号和转义</span></a></li><li><a href="variable.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">变量</span></a></li><li><a href="string.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">字符串操作</span></a></li><li><a href="arithmetic.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">算术运算</span></a></li><li><a href="history.html" class="is-active"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">操作历史</span></a></li><li><a href="readline.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">行操作</span></a></li><li><a href="stack.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">目录堆栈</span></a></li><li><a href="script.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">脚本入门</span></a></li><li><a href="read.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">read 命令</span></a></li><li><a href="condition.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">条件判断</span></a></li><li><a href="loop.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">循环</span></a></li><li><a href="function.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">函数</span></a></li><li><a href="array.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">数组</span></a></li><li><a href="set.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">set 命令，shopt 命令</span></a></li><li><a href="debug.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">脚本除错</span></a></li><li><a href="mktemp.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">mktemp 命令，trap 命令</span></a></li><li><a href="startup.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">启动环境</span></a></li><li><a href="prompt.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">命令提示符</span></a></li></ul></aside></div></nav><nav class="panel panel-info is-light"><p class="panel-heading"><i class="fa fa-link" aria-hidden="true"></i> 链接</p><div class="panel-block"><aside class="menu"><p class="menu-label"></p><ul class="menu-list"><li><a href="https://raw.githubusercontent.com/wangdoc/bash-tutorial/master/docs/history.md" target="_blank"><span class="icon"></span><i class="fa fa-code" aria-hidden="true" style="width: 14px;"></i>&nbsp;本文源码</a></li><li><a href="https://github.com/wangdoc/bash-tutorial" target="_blank"><span class="icon"></span><i class="fa fa-hdd-o" aria-hidden="true" style="width: 14px;"></i>&nbsp;代码仓库</a></li><li><a href="https://github.com/wangdoc/bash-tutorial/issues" target="_blank"><span class="icon"></span><i class="fa fa-flag-o" aria-hidden="true" style="width: 14px;"></i>&nbsp;反馈</a></li></ul></aside></div></nav></div></div><div class="columns"><div class="column is-8 is-6-widescreen is-offset-1-widescreen"><div id="disqus_thread"></div></div></div></div></section><footer class="footer"><div class="container"><div class="content has-text-centered"><p>联系：contact@wangdoc.com</p></div></div></footer><script>var LOPPO={current_path:"history.md",relative_root_path:"",article_toc:'<ul class="markdownIt-TOC">\n<li><a href="#%E7%AE%80%E4%BB%8B">简介</a></li>\n<li><a href="#history-%E5%91%BD%E4%BB%A4">history 命令</a></li>\n<li><a href="#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">环境变量</a>\n<ul>\n<li><a href="#histtimeformat">HISTTIMEFORMAT</a></li>\n<li><a href="#histsize">HISTSIZE</a></li>\n<li><a href="#histignore">HISTIGNORE</a></li>\n</ul>\n</li>\n<li><a href="#ctrl--r">Ctrl + r</a></li>\n<li><a href="#-%E5%91%BD%E4%BB%A4">! 命令</a>\n<ul>\n<li><a href="#--%E8%A1%8C%E5%8F%B7">! + 行号</a></li>\n<li><a href="#--%E6%95%B0%E5%AD%97">!- 数字</a></li>\n<li><a href="#">!!</a></li>\n<li><a href="#--%E6%90%9C%E7%B4%A2%E8%AF%8D">! + 搜索词</a></li>\n<li><a href="#--%E6%90%9C%E7%B4%A2%E8%AF%8D-1">!? + 搜索词</a></li>\n<li><a href="#-1">!$，!*</a></li>\n<li><a href="#p">!:p</a></li>\n</ul>\n</li>\n<li><a href="#string1string2"><code>^string1^string2</code></a></li>\n<li><a href="#histverify-%E5%8F%82%E6%95%B0">histverify 参数</a></li>\n<li><a href="#%E5%BF%AB%E6%8D%B7%E9%94%AE">快捷键</a></li>\n<li><a href="#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5">参考链接</a></li>\n</ul>\n'}</script><script src="assets/js/app.js"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-111269443-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-111269443-1")</script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script"),t=(e.src="https://hm.baidu.com/hm.js?5eec262881855af3dede6a71234571f6",document.getElementsByTagName("script")[0]);t.parentNode.insertBefore(e,t)}()</script><script>var disqus_config=function(){var t=window.location,e=t.protocol+"//"+t.host+(t.port?":"+t.port:"")+t.pathname;this.page.url=e,this.page.identifier=t.pathname};!function(){var t=document,e=t.createElement("script");e.src="https://wangdoc-bash.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><!--script src="assets/js/social-share.min.js"--><!--/script--><script>var shareDesc="我正在阅读《操作历史》，出自网道（WangDoc.com）的《Bash 脚本教程》。",shareOpts={url:window.location.href,source:shareDesc,title:shareDesc,description:"",image:"",sites:["weibo","wechat","qq","qzone","twitter","facebook"],origin:"WangDoc_com",disabled:[],wechatQrcodeTitle:"微信",wechatQrcodeHelper:"扫一下二维码，分享到微信。"};socialShare(".social-share",shareOpts)</script></body></html>